## 实践与思考

### 1. 关于拓扑推理模型

在选择到底是使用learning-based方法还是rules-based方法进行拓扑推理时，其实和leader还有我们团队很多同事讨论过很长时间。我们都觉得，如果一切顺利，感知效果很好的前提下，基于规则的系统应该能应付所有情况，毕竟拓扑就是按人类制定的规则来制定的，它的规则性特别强。

但最后我们还是决定基于学习型方法，这和各种选择厂家选择端到端发展策略的理由有点像，我们这么考虑主要有两个原因：一个是想减少信息损耗。我们希望尽可能完整地把上游的信息无损的传到下游，这样下游就有更多的信息可以用，整个精度也会更好。另一个原因是，我们做了一些实验，发现加入拓扑结构后，对感知系统确实有好处，能提高感知的精度。

再回到我们的感知-拓扑网络，现在学术界有两种主要的思路：一种是基于旷世的TopoMLP的提出的一个理论，强调的是感知大于拓扑，即，如果我们把感知做好了，拓扑自然也就跟着好了。另一种思路是，假设在感知做得不够好的情况下，比如可能会感知有错误，那我们依然能够用一些更复杂的算法来获得正确的拓扑结构。

我个人更偏向于第一种思路，就是先把感知做好，拓扑自然就顺了。毕竟如果感知做得不好，那对下游肯定有影响；因此在处理拓扑时，可以只采用了几层MLP，这使得结构相对简单，而且以极小的代价就实现了极佳的效果。这是因为它的主要作用是辅助感知，我们在大多数情况下都做得相当不错，这已经达到了我们对拓扑的需求。

在LaneSegNet范式中，算法选择的是基于车道段（lanesegment），而不是像MapTR那样使用车道线或多边形作为基本单元。这种建模方法的选择也是基于两点考虑：首先，车道段的方法非常适合端到端的处理，因为我们实际上是在预测一条中心线，然后通过中心线向两侧扩展得到车道线。这种方式将隐藏的约束显现出来，避免了将车道线和中线绑定的复杂性。此外还有一个优势，它使得后处理变得非常方便，因为它是将道路中心线和边线结合在一起，形成一个多边形。这样，我们在进行NMS时就能轻松地去除重复问题。